<%-include('../layouts/adminHeader.ejs')%>
<!-- Table Start -->
<div class="container-fluid pt-4 px-4">
  <div class="test d-flex justify-content-between align-items-center">
    <h1 class="mb-4">Coupon</h1>
  </div>

  <div class="row pt-4 g-4">
    <div class="col-12">
      <% function getDate(dbDate) { const dateObject=new Date(dbDate); const
      year=dateObject.getFullYear(); const
      month=dateObject.toLocaleString('en-us', { month: 'short' }); const
      day=dateObject.getDate(); const hours=dateObject.getHours(); const
      minutes=dateObject.getMinutes(); const formattedDate=`${day} ${month}
      ${year} `; return formattedDate } %>
      <a href="/admin/addCoupon"
        ><button class="btn btn-outline-primary mb-4">Add coupon</button></a
      >
      <div class="bg-light rounded h-100 p-4">
        <table class="table" id="userTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Coupon Code</th>
              <th scope="col">Discount Amount</th>
              <th scope="col">Expiry Date</th>
              <th scope="col">Max Cart Amount</th>
              <th scope="col">Max discount</th>
              <th scope="col">Limit</th>
              <th scope="col">Status</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <% if(couponData){ %>
            <%couponData.forEach(function(couponData,index){%>
            <tr>
              <td scope="row"><%=index+1%></td>
              <td><%=couponData.code%></td>
              <td><%=couponData.discountAmount%></td>
              <td><%=getDate(couponData.expiryDate)%></td>
              <td><%=couponData.maxCartAmount%></td>
              <td><%=couponData.maxDiscountAmount%></td>
              <td><%=couponData.maxUsers%></td>
              <td><%=couponData.status%></td>
              <td>
                <a href="/admin/deleteCoupon?id=<%=couponData._id %>"
                  ><button role="button" class="btn btn-danger rounded-pill">
                    Delete
                  </button></a
                >
                <a href="/admin/editCoupon?id=<%=couponData._id %>"
                  ><button role="button" class="btn btn-outline-primary">
                    Edit
                  </button></a
                >
              </td>
            </tr>

            <%})%> <%}else{%>
            <div><H3>Empty Coupon</H3></div>
            <%}%>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- Table End -->

<%-include('../layouts/adminFooter.ejs')%>
