<%-include('../layouts/adminHeader.ejs')%>

<!-- Table Start -->
<div class="container-fluid pt-5 px-4">
  <div class="test d-flex justify-content-between align-items-center">
    <h1>Products</h1>
  </div>

  <div class="row pt-4 g-4">
    <div class="col-12">
      <a href="/admin/addProduct"
        ><button class="btn btn-outline-dark mb-4">Add Product</button></a
      >
      <div class="bg-light rounded h-100 p-4">
        <table class="table" id="userTable">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Image</th>
              <th scope="col">Category</th>
              <th scope="col">Price</th>
              <th scope="col">Stock</th>
              <th scope="col">Status</th>
              <th scope="col">Description</th>
              <th scope="col">Action</th>
            </tr>
          </thead>

          <tbody>
            <% if(products){ %> <% products.forEach(function(product,index){%>
            <tr>
              <td scope="row"><%=index+1 %></td>
              <td><%= product.productName %></td>
              <td>
                <img
                  src="/product_images/<%= product.image[0] %>"
                  width="100px"
                  height="120px"
                  alt="<%= product.image %>"
                />
              </td>
              <td><%= product.category %></td>
              <td><%= product.price %></td>
              <td><%= product.stock%></td>
              <td><%= product.status%></td>
              <td><%= product.description%></td>

              <td>
                <% if(product.status){%>
                <a href="/admin/action_product?id=<%= product._id %>"
                  ><button
                    role="button"
                    class="btn btn-success rounded-pill m-2"
                  >
                    Listed
                  </button></a
                >
                <a href="/admin/edit_product?id=<%= product._id %>"
                  ><button role="button" class="btn btn-outline-primary">
                    Edit
                  </button></a
                >

                <%}else{%>

                <a href="/admin/action_product?id=<%= product._id %>"
                  ><button
                    role="button"
                    class="btn btn-danger rounded-pill m-2"
                    onclick="return confirm('Are you sure you want to Unlist this product?');"
                  >
                    Unlisted
                  </button></a
                >
                <a href="/admin/edit_product?id=<%= product._id %>"
                  ><button role="button" class="btn btn-outline-primary">
                    Edit
                  </button></a
                >

                <%}%>
              </td>
            </tr>

            <%})%> <% } else{ %>
            <h2>no products</h2>

            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- Table End -->
</div>
<%-include('../layouts/adminFooter.ejs')%>
